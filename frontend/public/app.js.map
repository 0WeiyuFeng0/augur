{"version":3,"sources":["app/GHDataAPI.js","app/GHDataCharts.js","app/lib/kube/kube.js","app/lib/mg_line_brushing.js","app/ui.js"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAxGA;AAAA;ACAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAtNA;AAAA;ACAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAxyDA;AAAA;ACAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AA7VA;AAAA;CCAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAxNA;AAAA","file":"public/app.js","sourcesContent":["'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar $ = require('jquery');\n\nvar GHDataAPI = function () {\n  function GHDataAPI(hostURL, version) {\n    _classCallCheck(this, GHDataAPI);\n\n    this._version = version || 'unstable';\n    this._host = hostURL || 'http://' + window.location.hostname + ':5000/';\n    this.__cache = {};\n  }\n\n  _createClass(GHDataAPI, [{\n    key: 'Repo',\n    value: function Repo(owner, repoName) {\n      var _this = this;\n\n      if (repoName) {\n        var repo = { owner: owner, name: repoName };\n      } else if (owner) {\n        var splitURL = owner.split('/');\n        if (splitURL.length < 3) {\n          var repo = { owner: splitURL[0], name: splitURL[1] };\n        } else {\n          var repo = { owner: splitURL[3], name: splitURL[4] };\n        }\n      }\n\n      repo.toString = function () {\n        return repo.owner + '/' + repo.name;\n      };\n\n      var Endpoint = function Endpoint(endpoint) {\n        var self = _this;\n        var url = _this._host + _this._version + '/' + repo.owner + '/' + repo.name + '/' + endpoint;\n        return function (params, callback) {\n          if (self.__cache[btoa(url)]) {\n            if (self.__cache[btoa(url)].created_at > Date.now() - 1000 * 60) {\n              return new Promise(function (resolve, reject) {\n                resolve(JSON.parse(self.__cache[btoa(url)].data));\n              });\n            }\n          }\n          return $.get(url, params, callback).then(function (data) {\n            self.__cache[btoa(url)] = {\n              created_at: Date.now(),\n              data: JSON.stringify(data)\n            };\n            if (typeof callback === 'function') {\n              callback(data);\n            }\n            return new Promise(function (resolve, reject) {\n              resolve(data);\n            });\n          });\n        };\n      };\n\n      var Timeseries = function Timeseries(endpoint) {\n        var func = Endpoint('timeseries/' + endpoint);\n        func.relativeTo = function (baselineRepo, params, callback) {\n          var url = 'timeseries/' + endpoint + '/relative_to/' + baselineRepo.owner + '/' + baselineRepo.name;\n          return Endpoint(url)();\n        };\n        return func;\n      };\n\n      repo.commits = Timeseries('commits');\n      repo.forks = Timeseries('forks');\n      repo.issues = Timeseries('issues');\n      repo.pulls = Timeseries('pulls');\n      repo.stars = Timeseries('stargazers');\n      repo.tags = Timeseries('tags');\n      repo.downloads = Timeseries('downloads');\n      repo.uniqueCommitters = Timeseries('unique_committers');\n\n      repo.pullsAcceptanceRate = Endpoint('pulls/acceptance_rate');\n      repo.issuesResponseTime = Endpoint('issues/response_time');\n      repo.contributors = Endpoint('contributors');\n      repo.contributions = Endpoint('contributions');\n      repo.committerLocations = Endpoint('committer_locations');\n      repo.communityAge = Endpoint('community_age');\n      repo.linkingWebsites = Endpoint('linking_websites');\n      repo.busFactor = Endpoint('bus_factor');\n      repo.dependents = Endpoint('dependents');\n      repo.dependencies = Endpoint('dependencies');\n\n      return repo;\n    }\n  }]);\n\n  return GHDataAPI;\n}();\n\nexports.default = GHDataAPI;\n","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _metricsGraphics = require('metrics-graphics');\n\nvar _metricsGraphics2 = _interopRequireDefault(_metricsGraphics);\n\nvar _d = require('d3');\n\nvar d3 = _interopRequireWildcard(_d);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar GHDataCharts = function () {\n  function GHDataCharts() {\n    _classCallCheck(this, GHDataCharts);\n  }\n\n  _createClass(GHDataCharts, null, [{\n    key: 'convertDates',\n    value: function convertDates(data) {\n      if (Array.isArray(data[0])) {\n        data.map(function (datum) {\n          return GHDataCharts.convertDates(datum);\n        });\n      } else {\n        var EARLIEST = new Date('01-01-2005');\n        data = data.map(function (d) {\n          d.date = new Date(d.date);\n          return d;\n        }).filter(function (d) {\n          return d.date > EARLIEST;\n        });\n      }\n      return data;\n    }\n  }, {\n    key: 'rollingAverage',\n    value: function rollingAverage(data, windowSizeInHours) {\n      var windowMiliseconds = windowSizeInHours * 60 * 60 * 1000;\n      var keys = Object.keys(data[0]);\n      var rolling = data.map(function (elem) {\n        var after = new Date(elem.date).getTime() - windowMiliseconds;\n        var before = new Date(elem.date).getTime();\n        var average = {};\n        data.forEach(function (toAverage) {\n          var testDate = new Date(toAverage.date).getTime();\n          if (testDate <= before && testDate >= after) {\n            keys.forEach(function (prop) {\n              if (!isNaN(toAverage[prop] / 2.0) && average[prop]) {\n                average[prop] = (toAverage[prop] + average[prop]) / 2.0;\n              } else if (!isNaN(toAverage[prop] / 2.0)) {\n                average[prop] = toAverage[prop];\n              }\n            });\n          }\n        });\n        for (var prop in average) {\n          if (average.hasOwnProperty(prop)) {\n            elem[prop + '_average'] = average[prop];\n          }\n        }\n        return elem;\n      });\n      return rolling;\n    }\n  }, {\n    key: 'convertToPercentages',\n    value: function convertToPercentages(data) {\n      if (data && data[0]) {\n        var keys = Object.keys(data[0]);\n      } else {\n        return [];\n      }\n      if (keys[1] !== 'date' && !isNaN(data[0][keys[1]] / 2.0)) {\n        var baseline = (data[0][keys[1]] + data[1][keys[1]]) / 2;\n        if (isNaN(baseline)) {\n          baseline = 1;\n        }\n        data = data.map(function (datum) {\n          datum['value'] = datum[keys[1]] / baseline;\n          return datum;\n        });\n      }\n      return data;\n    }\n  }, {\n    key: 'combine',\n    value: function combine() {\n      return Array.from(arguments);\n    }\n  }, {\n    key: 'ComparisonLineChart',\n    value: function ComparisonLineChart(selector, data, title, baseline) {\n      GHDataCharts.convertDates(data);\n      var keys = Object.keys(data[0]).filter(function (d) {\n        return (/ratio/.test(d)\n        );\n      });\n      console.log(keys);\n      return _metricsGraphics2.default.data_graphic({\n        title: title || 'Comparison',\n        data: data,\n        full_width: true,\n        height: 200,\n        baselines: [{ value: 1, label: baseline || 'Other Repo' }],\n        format: 'percentage',\n        x_accessor: 'date',\n        y_accessor: keys,\n        target: selector\n      });\n    }\n  }, {\n    key: 'LineChart',\n    value: function LineChart(selector, data, title, rollingAverage) {\n      var data_graphic_config = {\n        title: title || 'Activity',\n        data: data,\n        full_width: true,\n        height: 200,\n        x_accessor: 'date',\n        target: selector\n      };\n\n      if (rollingAverage) {\n        data_graphic_config.data = GHDataCharts.rollingAverage(data, 365 * 24);\n        console.log(data_graphic_config.data);\n        data_graphic_config.colors = ['#CCC', '#FF3647'];\n      }\n\n      if (Array.isArray(data[0])) {\n        data_graphic_config.legend = ['compared', 'base'];\n        data_graphic_config.colors = ['#FF3647', '#CCC'];\n      } else {\n        data_graphic_config.y_accessor = Object.keys(data[0]).slice(1);\n        data_graphic_config.legend = data_graphic_config.y_accessor;\n      }\n\n      if (Object.keys(data_graphic_config.data[0]).slice(1).length > 1) {\n        var legend = document.createElement('div');\n        legend.style.position = 'relative';\n        legend.style.margin = '0';\n        legend.style.padding = '0';\n        legend.style.height = '0';\n        legend.style.top = '31px';\n        legend.style.left = '55px';\n        legend.style.fontSize = '14px';\n        legend.style.fontWeight = 'bold';\n        legend.style.opacity = '0.8';\n        $(selector).append(legend);\n        data_graphic_config.legend_target = legend;\n        $(selector).hover(function () {\n          legend.style.display = 'none';\n        }, function () {\n          legend.style.display = 'block';\n        });\n      }\n\n      GHDataCharts.convertDates(data);\n      return _metricsGraphics2.default.data_graphic(data_graphic_config);\n    }\n  }, {\n    key: 'Timeline',\n    value: function Timeline(selector, data, title) {\n      var dataCleaned = [];\n      var legend = [];\n      for (var event in data) {\n        if (data.hasOwnProperty(event)) {\n          dataCleaned.push([{\n            date: new Date(data[event]),\n            value: 10\n          }]);\n          legend.push(event);\n        }\n      }\n      console.log(dataCleaned);\n      return _metricsGraphics2.default.data_graphic({\n        title: title || 'Timeline',\n        data: dataCleaned,\n        full_width: true,\n        height: 200,\n        x_accessor: 'date',\n        legend: legend,\n        target: selector\n      });\n    }\n  }, {\n    key: 'NoChart',\n    value: function NoChart(selector, title) {\n      return _metricsGraphics2.default.data_graphic({\n        title: \"Missing Data\",\n        error: 'Data unavaliable for ' + title,\n        chart_type: 'missing-data',\n        missing_text: title + ' could not be loaded',\n        target: '#missing-data',\n        full_width: true,\n        height: 200\n      });\n    }\n  }]);\n\n  return GHDataCharts;\n}();\n\nexports.default = GHDataCharts;\n","'use strict';\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\n/*\n\tKube. CSS & JS Framework\n\tVersion 6.5.2\n\tUpdated: February 2, 2017\n\n\thttp://imperavi.com/kube/\n\n\tCopyright (c) 2009-2017, Imperavi LLC.\n\tLicense: MIT\n*/\nif (typeof jQuery === 'undefined') {\n\tthrow new Error('Kube\\'s requires jQuery');\n};\n;(function ($) {\n\tvar version = $.fn.jquery.split('.');if (version[0] == 1 && version[1] < 8) {\n\t\tthrow new Error('Kube\\'s requires at least jQuery v1.8');\n\t}\n})(jQuery);\n\n;(function () {\n\t// Inherits\n\tFunction.prototype.inherits = function (parent) {\n\t\tvar F = function F() {};\n\t\tF.prototype = parent.prototype;\n\t\tvar f = new F();\n\n\t\tfor (var prop in this.prototype) {\n\t\t\tf[prop] = this.prototype[prop];\n\t\t}this.prototype = f;\n\t\tthis.prototype.super = parent.prototype;\n\t};\n\n\t// Core Class\n\tvar Kube = function Kube(element, options) {\n\t\toptions = (typeof options === 'undefined' ? 'undefined' : _typeof(options)) === 'object' ? options : {};\n\n\t\tthis.$element = $(element);\n\t\tthis.opts = $.extend(true, this.defaults, $.fn[this.namespace].options, this.$element.data(), options);\n\t\tthis.$target = typeof this.opts.target === 'string' ? $(this.opts.target) : null;\n\t};\n\n\t// Core Functionality\n\tKube.prototype = {\n\t\tgetInstance: function getInstance() {\n\t\t\treturn this.$element.data('fn.' + this.namespace);\n\t\t},\n\t\thasTarget: function hasTarget() {\n\t\t\treturn !(this.$target === null);\n\t\t},\n\t\tcallback: function callback(type) {\n\t\t\tvar args = [].slice.call(arguments).splice(1);\n\n\t\t\t// on element callback\n\t\t\tif (this.$element) {\n\t\t\t\targs = this._fireCallback($._data(this.$element[0], 'events'), type, this.namespace, args);\n\t\t\t}\n\n\t\t\t// on target callback\n\t\t\tif (this.$target) {\n\t\t\t\targs = this._fireCallback($._data(this.$target[0], 'events'), type, this.namespace, args);\n\t\t\t}\n\n\t\t\t// opts callback\n\t\t\tif (this.opts && this.opts.callbacks && $.isFunction(this.opts.callbacks[type])) {\n\t\t\t\treturn this.opts.callbacks[type].apply(this, args);\n\t\t\t}\n\n\t\t\treturn args;\n\t\t},\n\t\t_fireCallback: function _fireCallback(events, type, eventNamespace, args) {\n\t\t\tif (events && typeof events[type] !== 'undefined') {\n\t\t\t\tvar len = events[type].length;\n\t\t\t\tfor (var i = 0; i < len; i++) {\n\t\t\t\t\tvar namespace = events[type][i].namespace;\n\t\t\t\t\tif (namespace === eventNamespace) {\n\t\t\t\t\t\tvar value = events[type][i].handler.apply(this, args);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn typeof value === 'undefined' ? args : value;\n\t\t}\n\t};\n\n\t// Scope\n\twindow.Kube = Kube;\n})();\n/**\n * @library Kube Plugin\n * @author Imperavi LLC\n * @license MIT\n */\n(function (Kube) {\n\tKube.Plugin = {\n\t\tcreate: function create(classname, pluginname) {\n\t\t\tpluginname = typeof pluginname === 'undefined' ? classname.toLowerCase() : pluginname;\n\n\t\t\t$.fn[pluginname] = function (method, options) {\n\t\t\t\tvar args = Array.prototype.slice.call(arguments, 1);\n\t\t\t\tvar name = 'fn.' + pluginname;\n\t\t\t\tvar val = [];\n\n\t\t\t\tthis.each(function () {\n\t\t\t\t\tvar $this = $(this),\n\t\t\t\t\t    data = $this.data(name);\n\t\t\t\t\toptions = (typeof method === 'undefined' ? 'undefined' : _typeof(method)) === 'object' ? method : options;\n\n\t\t\t\t\tif (!data) {\n\t\t\t\t\t\t// Initialization\n\t\t\t\t\t\t$this.data(name, {});\n\t\t\t\t\t\t$this.data(name, data = new Kube[classname](this, options));\n\t\t\t\t\t}\n\n\t\t\t\t\t// Call methods\n\t\t\t\t\tif (typeof method === 'string') {\n\t\t\t\t\t\tif ($.isFunction(data[method])) {\n\t\t\t\t\t\t\tvar methodVal = data[method].apply(data, args);\n\t\t\t\t\t\t\tif (methodVal !== undefined) {\n\t\t\t\t\t\t\t\tval.push(methodVal);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t$.error('No such method \"' + method + '\" for ' + classname);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\treturn val.length === 0 || val.length === 1 ? val.length === 0 ? this : val[0] : val;\n\t\t\t};\n\n\t\t\t$.fn[pluginname].options = {};\n\n\t\t\treturn this;\n\t\t},\n\t\tautoload: function autoload(pluginname) {\n\t\t\tvar arr = pluginname.split(',');\n\t\t\tvar len = arr.length;\n\n\t\t\tfor (var i = 0; i < len; i++) {\n\t\t\t\tvar name = arr[i].toLowerCase().split(',').map(function (s) {\n\t\t\t\t\treturn s.trim();\n\t\t\t\t}).join(',');\n\t\t\t\tthis.autoloadQueue.push(name);\n\t\t\t}\n\n\t\t\treturn this;\n\t\t},\n\t\tautoloadQueue: [],\n\t\tstartAutoload: function startAutoload() {\n\t\t\tif (!window.MutationObserver || this.autoloadQueue.length === 0) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tvar self = this;\n\t\t\tvar observer = new MutationObserver(function (mutations) {\n\t\t\t\tmutations.forEach(function (mutation) {\n\t\t\t\t\tvar newNodes = mutation.addedNodes;\n\t\t\t\t\tif (newNodes.length === 0 || newNodes.length === 1 && newNodes.nodeType === 3) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tself.startAutoloadOnce();\n\t\t\t\t});\n\t\t\t});\n\n\t\t\t// pass in the target node, as well as the observer options\n\t\t\tobserver.observe(document, {\n\t\t\t\tsubtree: true,\n\t\t\t\tchildList: true\n\t\t\t});\n\t\t},\n\t\tstartAutoloadOnce: function startAutoloadOnce() {\n\t\t\tvar self = this;\n\t\t\tvar $nodes = $('[data-component]').not('[data-loaded]');\n\t\t\t$nodes.each(function () {\n\t\t\t\tvar $el = $(this);\n\t\t\t\tvar pluginname = $el.data('component');\n\n\t\t\t\tif (self.autoloadQueue.indexOf(pluginname) !== -1) {\n\t\t\t\t\t$el.attr('data-loaded', true);\n\t\t\t\t\t$el[pluginname]();\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\twatch: function watch() {\n\t\t\tKube.Plugin.startAutoloadOnce();\n\t\t\tKube.Plugin.startAutoload();\n\t\t}\n\t};\n\n\t$(window).on('load', function () {\n\t\tKube.Plugin.watch();\n\t});\n})(Kube);\n/**\n * @library Kube Animation\n * @author Imperavi LLC\n * @license MIT\n */\n(function (Kube) {\n\tKube.Animation = function (element, effect, callback) {\n\t\tthis.namespace = 'animation';\n\t\tthis.defaults = {};\n\n\t\t// Parent Constructor\n\t\tKube.apply(this, arguments);\n\n\t\t// Initialization\n\t\tthis.effect = effect;\n\t\tthis.completeCallback = typeof callback === 'undefined' ? false : callback;\n\t\tthis.prefixes = ['', '-moz-', '-o-animation-', '-webkit-'];\n\t\tthis.queue = [];\n\n\t\tthis.start();\n\t};\n\n\tKube.Animation.prototype = {\n\t\tstart: function start() {\n\t\t\tif (this.isSlideEffect()) this.setElementHeight();\n\n\t\t\tthis.addToQueue();\n\t\t\tthis.clean();\n\t\t\tthis.animate();\n\t\t},\n\t\taddToQueue: function addToQueue() {\n\t\t\tthis.queue.push(this.effect);\n\t\t},\n\t\tsetElementHeight: function setElementHeight() {\n\t\t\tthis.$element.height(this.$element.height());\n\t\t},\n\t\tremoveElementHeight: function removeElementHeight() {\n\t\t\tthis.$element.css('height', '');\n\t\t},\n\t\tisSlideEffect: function isSlideEffect() {\n\t\t\treturn this.effect === 'slideDown' || this.effect === 'slideUp';\n\t\t},\n\t\tisHideableEffect: function isHideableEffect() {\n\t\t\tvar effects = ['fadeOut', 'slideUp', 'flipOut', 'zoomOut', 'slideOutUp', 'slideOutRight', 'slideOutLeft'];\n\n\t\t\treturn $.inArray(this.effect, effects) !== -1;\n\t\t},\n\t\tisToggleEffect: function isToggleEffect() {\n\t\t\treturn this.effect === 'show' || this.effect === 'hide';\n\t\t},\n\t\tstoreHideClasses: function storeHideClasses() {\n\t\t\tif (this.$element.hasClass('hide-sm')) this.$element.data('hide-sm-class', true);else if (this.$element.hasClass('hide-md')) this.$element.data('hide-md-class', true);\n\t\t},\n\t\trevertHideClasses: function revertHideClasses() {\n\t\t\tif (this.$element.data('hide-sm-class')) this.$element.addClass('hide-sm').removeData('hide-sm-class');else if (this.$element.data('hide-md-class')) this.$element.addClass('hide-md').removeData('hide-md-class');else this.$element.addClass('hide');\n\t\t},\n\t\tremoveHideClass: function removeHideClass() {\n\t\t\tif (this.$element.data('hide-sm-class')) this.$element.removeClass('hide-sm');else if (this.$element.data('hide-md-class')) this.$element.removeClass('hide-md');else this.$element.removeClass('hide');\n\t\t},\n\t\tanimate: function animate() {\n\t\t\tthis.storeHideClasses();\n\t\t\tif (this.isToggleEffect()) {\n\t\t\t\treturn this.makeSimpleEffects();\n\t\t\t}\n\n\t\t\tthis.$element.addClass('kubeanimated');\n\t\t\tthis.$element.addClass(this.queue[0]);\n\t\t\tthis.removeHideClass();\n\n\t\t\tvar _callback = this.queue.length > 1 ? null : this.completeCallback;\n\t\t\tthis.complete('AnimationEnd', $.proxy(this.makeComplete, this), _callback);\n\t\t},\n\t\tmakeSimpleEffects: function makeSimpleEffects() {\n\t\t\tif (this.effect === 'show') this.removeHideClass();else if (this.effect === 'hide') this.revertHideClasses();\n\n\t\t\tif (typeof this.completeCallback === 'function') this.completeCallback(this);\n\t\t},\n\t\tmakeComplete: function makeComplete() {\n\t\t\tif (this.$element.hasClass(this.queue[0])) {\n\t\t\t\tthis.clean();\n\t\t\t\tthis.queue.shift();\n\n\t\t\t\tif (this.queue.length) this.animate();\n\t\t\t}\n\t\t},\n\t\tcomplete: function complete(type, make, callback) {\n\t\t\tvar event = type.toLowerCase() + ' webkit' + type + ' o' + type + ' MS' + type;\n\n\t\t\tthis.$element.one(event, $.proxy(function () {\n\t\t\t\tif (typeof make === 'function') make();\n\t\t\t\tif (this.isHideableEffect()) this.revertHideClasses();\n\t\t\t\tif (this.isSlideEffect()) this.removeElementHeight();\n\t\t\t\tif (typeof callback === 'function') callback(this);\n\n\t\t\t\tthis.$element.off(event);\n\t\t\t}, this));\n\t\t},\n\t\tclean: function clean() {\n\t\t\tthis.$element.removeClass('kubeanimated').removeClass(this.queue[0]);\n\t\t}\n\t};\n\n\t// Inheritance\n\tKube.Animation.inherits(Kube);\n})(Kube);\n\n// Plugin\n(function ($) {\n\t$.fn.animation = function (effect, callback) {\n\t\tvar name = 'fn.animation';\n\n\t\treturn this.each(function () {\n\t\t\tvar $this = $(this),\n\t\t\t    data = $this.data(name);\n\n\t\t\t$this.data(name, {});\n\t\t\t$this.data(name, data = new Kube.Animation(this, effect, callback));\n\t\t});\n\t};\n\n\t$.fn.animation.options = {};\n})(jQuery);\n/**\n * @library Kube Detect\n * @author Imperavi LLC\n * @license MIT\n */\n(function (Kube) {\n\tKube.Detect = function () {};\n\n\tKube.Detect.prototype = {\n\t\tisMobile: function isMobile() {\n\t\t\treturn (/(iPhone|iPod|BlackBerry|Android)/.test(navigator.userAgent)\n\t\t\t);\n\t\t},\n\t\tisDesktop: function isDesktop() {\n\t\t\treturn !/(iPhone|iPod|iPad|BlackBerry|Android)/.test(navigator.userAgent);\n\t\t},\n\t\tisMobileScreen: function isMobileScreen() {\n\t\t\treturn $(window).width() <= 768;\n\t\t},\n\t\tisTabletScreen: function isTabletScreen() {\n\t\t\treturn $(window).width() >= 768 && $(window).width() <= 1024;\n\t\t},\n\t\tisDesktopScreen: function isDesktopScreen() {\n\t\t\treturn $(window).width() > 1024;\n\t\t}\n\t};\n})(Kube);\n/**\n * @library Kube FormData\n * @author Imperavi LLC\n * @license MIT\n */\n(function (Kube) {\n\tKube.FormData = function (app) {\n\t\tthis.opts = app.opts;\n\t};\n\n\tKube.FormData.prototype = {\n\t\tset: function set(data) {\n\t\t\tthis.data = data;\n\t\t},\n\t\tget: function get(formdata) {\n\t\t\tthis.formdata = formdata;\n\n\t\t\tif (this.opts.appendForms) this.appendForms();\n\t\t\tif (this.opts.appendFields) this.appendFields();\n\n\t\t\treturn this.data;\n\t\t},\n\t\tappendFields: function appendFields() {\n\t\t\tvar $fields = $(this.opts.appendFields);\n\t\t\tif ($fields.length === 0) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tvar self = this;\n\t\t\tvar str = '';\n\n\t\t\tif (this.formdata) {\n\t\t\t\t$fields.each(function () {\n\t\t\t\t\tself.data.append($(this).attr('name'), $(this).val());\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\t$fields.each(function () {\n\t\t\t\t\tstr += '&' + $(this).attr('name') + '=' + $(this).val();\n\t\t\t\t});\n\n\t\t\t\tthis.data = this.data === '' ? str.replace(/^&/, '') : this.data + str;\n\t\t\t}\n\t\t},\n\t\tappendForms: function appendForms() {\n\t\t\tvar $forms = $(this.opts.appendForms);\n\t\t\tif ($forms.length === 0) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (this.formdata) {\n\t\t\t\tvar self = this;\n\t\t\t\tvar formsData = $(this.opts.appendForms).serializeArray();\n\t\t\t\t$.each(formsData, function (i, s) {\n\t\t\t\t\tself.data.append(s.name, s.value);\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tvar str = $forms.serialize();\n\n\t\t\t\tthis.data = this.data === '' ? str : this.data + '&' + str;\n\t\t\t}\n\t\t}\n\t};\n})(Kube);\n/**\n * @library Kube Response\n * @author Imperavi LLC\n * @license MIT\n */\n(function (Kube) {\n\tKube.Response = function (app) {};\n\n\tKube.Response.prototype = {\n\t\tparse: function parse(str) {\n\t\t\tif (str === '') return false;\n\n\t\t\tvar obj = {};\n\n\t\t\ttry {\n\t\t\t\tobj = JSON.parse(str);\n\t\t\t} catch (e) {\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tif (obj[0] !== undefined) {\n\t\t\t\tfor (var item in obj) {\n\t\t\t\t\tthis.parseItem(obj[item]);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tthis.parseItem(obj);\n\t\t\t}\n\n\t\t\treturn obj;\n\t\t},\n\t\tparseItem: function parseItem(item) {\n\t\t\tif (item.type === 'value') {\n\t\t\t\t$.each(item.data, $.proxy(function (key, val) {\n\t\t\t\t\tval = val === null || val === false ? 0 : val;\n\t\t\t\t\tval = val === true ? 1 : val;\n\n\t\t\t\t\t$(key).val(val);\n\t\t\t\t}, this));\n\t\t\t} else if (item.type === 'html') {\n\t\t\t\t$.each(item.data, $.proxy(function (key, val) {\n\t\t\t\t\tval = val === null || val === false ? '' : val;\n\n\t\t\t\t\t$(key).html(this.stripslashes(val));\n\t\t\t\t}, this));\n\t\t\t} else if (item.type === 'addClass') {\n\t\t\t\t$.each(item.data, function (key, val) {\n\t\t\t\t\t$(key).addClass(val);\n\t\t\t\t});\n\t\t\t} else if (item.type === 'removeClass') {\n\t\t\t\t$.each(item.data, function (key, val) {\n\t\t\t\t\t$(key).removeClass(val);\n\t\t\t\t});\n\t\t\t} else if (item.type === 'command') {\n\t\t\t\t$.each(item.data, function (key, val) {\n\t\t\t\t\t$(val)[key]();\n\t\t\t\t});\n\t\t\t} else if (item.type === 'animation') {\n\t\t\t\t$.each(item.data, function (key, data) {\n\t\t\t\t\tdata.opts = typeof data.opts === 'undefined' ? {} : data.opts;\n\n\t\t\t\t\t$(key).animation(data.name, data.opts);\n\t\t\t\t});\n\t\t\t} else if (item.type === 'location') {\n\t\t\t\ttop.location.href = item.data;\n\t\t\t} else if (item.type === 'notify') {\n\t\t\t\t$.notify(item.data);\n\t\t\t}\n\n\t\t\treturn item;\n\t\t},\n\t\tstripslashes: function stripslashes(str) {\n\t\t\treturn (str + '').replace(/\\0/g, '0').replace(/\\\\([\\\\'\"])/g, '$1');\n\t\t}\n\t};\n})(Kube);\n/**\n * @library Kube Utils\n * @author Imperavi LLC\n * @license MIT\n */\n(function (Kube) {\n\tKube.Utils = function () {};\n\n\tKube.Utils.prototype = {\n\t\tdisableBodyScroll: function disableBodyScroll() {\n\t\t\tvar $body = $('html');\n\t\t\tvar windowWidth = window.innerWidth;\n\n\t\t\tif (!windowWidth) {\n\t\t\t\tvar documentElementRect = document.documentElement.getBoundingClientRect();\n\t\t\t\twindowWidth = documentElementRect.right - Math.abs(documentElementRect.left);\n\t\t\t}\n\n\t\t\tvar isOverflowing = document.body.clientWidth < windowWidth;\n\t\t\tvar scrollbarWidth = this.measureScrollbar();\n\n\t\t\t$body.css('overflow', 'hidden');\n\t\t\tif (isOverflowing) $body.css('padding-right', scrollbarWidth);\n\t\t},\n\t\tmeasureScrollbar: function measureScrollbar() {\n\t\t\tvar $body = $('body');\n\t\t\tvar scrollDiv = document.createElement('div');\n\t\t\tscrollDiv.className = 'scrollbar-measure';\n\n\t\t\t$body.append(scrollDiv);\n\t\t\tvar scrollbarWidth = scrollDiv.offsetWidth - scrollDiv.clientWidth;\n\t\t\t$body[0].removeChild(scrollDiv);\n\t\t\treturn scrollbarWidth;\n\t\t},\n\t\tenableBodyScroll: function enableBodyScroll() {\n\t\t\t$('html').css({ 'overflow': '', 'padding-right': '' });\n\t\t}\n\t};\n})(Kube);\n/**\n * @library Kube Message\n * @author Imperavi LLC\n * @license MIT\n */\n(function (Kube) {\n\tKube.Message = function (element, options) {\n\t\tthis.namespace = 'message';\n\t\tthis.defaults = {\n\t\t\tcloseSelector: '.close',\n\t\t\tcloseEvent: 'click',\n\t\t\tanimationOpen: 'fadeIn',\n\t\t\tanimationClose: 'fadeOut',\n\t\t\tcallbacks: ['open', 'opened', 'close', 'closed']\n\t\t};\n\n\t\t// Parent Constructor\n\t\tKube.apply(this, arguments);\n\n\t\t// Initialization\n\t\tthis.start();\n\t};\n\n\t// Functionality\n\tKube.Message.prototype = {\n\t\tstart: function start() {\n\t\t\tthis.$close = this.$element.find(this.opts.closeSelector);\n\t\t\tthis.$close.on(this.opts.closeEvent + '.' + this.namespace, $.proxy(this.close, this));\n\t\t\tthis.$element.addClass('open');\n\t\t},\n\t\tstop: function stop() {\n\t\t\tthis.$close.off('.' + this.namespace);\n\t\t\tthis.$element.removeClass('open');\n\t\t},\n\t\topen: function open(e) {\n\t\t\tif (e) e.preventDefault();\n\n\t\t\tif (!this.isOpened()) {\n\t\t\t\tthis.callback('open');\n\t\t\t\tthis.$element.animation(this.opts.animationOpen, $.proxy(this.onOpened, this));\n\t\t\t}\n\t\t},\n\t\tisOpened: function isOpened() {\n\t\t\treturn this.$element.hasClass('open');\n\t\t},\n\t\tonOpened: function onOpened() {\n\t\t\tthis.callback('opened');\n\t\t\tthis.$element.addClass('open');\n\t\t},\n\t\tclose: function close(e) {\n\t\t\tif (e) e.preventDefault();\n\n\t\t\tif (this.isOpened()) {\n\t\t\t\tthis.callback('close');\n\t\t\t\tthis.$element.animation(this.opts.animationClose, $.proxy(this.onClosed, this));\n\t\t\t}\n\t\t},\n\t\tonClosed: function onClosed() {\n\t\t\tthis.callback('closed');\n\t\t\tthis.$element.removeClass('open');\n\t\t}\n\t};\n\n\t// Inheritance\n\tKube.Message.inherits(Kube);\n\n\t// Plugin\n\tKube.Plugin.create('Message');\n\tKube.Plugin.autoload('Message');\n})(Kube);\n/**\n * @library Kube Sticky\n * @author Imperavi LLC\n * @license MIT\n */\n(function (Kube) {\n\tKube.Sticky = function (element, options) {\n\t\tthis.namespace = 'sticky';\n\t\tthis.defaults = {\n\t\t\tclassname: 'fixed',\n\t\t\toffset: 0, // pixels\n\t\t\tcallbacks: ['fixed', 'unfixed']\n\t\t};\n\n\t\t// Parent Constructor\n\t\tKube.apply(this, arguments);\n\n\t\t// Initialization\n\t\tthis.start();\n\t};\n\n\t// Functionality\n\tKube.Sticky.prototype = {\n\t\tstart: function start() {\n\t\t\tthis.offsetTop = this.getOffsetTop();\n\n\t\t\tthis.load();\n\t\t\t$(window).scroll($.proxy(this.load, this));\n\t\t},\n\t\tgetOffsetTop: function getOffsetTop() {\n\t\t\treturn this.$element.offset().top;\n\t\t},\n\t\tload: function load() {\n\t\t\treturn this.isFix() ? this.fixed() : this.unfixed();\n\t\t},\n\t\tisFix: function isFix() {\n\t\t\treturn $(window).scrollTop() > this.offsetTop + this.opts.offset;\n\t\t},\n\t\tfixed: function fixed() {\n\t\t\tthis.$element.addClass(this.opts.classname).css('top', this.opts.offset + 'px');\n\t\t\tthis.callback('fixed');\n\t\t},\n\t\tunfixed: function unfixed() {\n\t\t\tthis.$element.removeClass(this.opts.classname).css('top', '');\n\t\t\tthis.callback('unfixed');\n\t\t}\n\t};\n\n\t// Inheritance\n\tKube.Sticky.inherits(Kube);\n\n\t// Plugin\n\tKube.Plugin.create('Sticky');\n\tKube.Plugin.autoload('Sticky');\n})(Kube);\n/**\n * @library Kube Toggleme\n * @author Imperavi LLC\n * @license MIT\n */\n(function (Kube) {\n\tKube.Toggleme = function (element, options) {\n\t\tthis.namespace = 'toggleme';\n\t\tthis.defaults = {\n\t\t\ttoggleEvent: 'click',\n\t\t\ttarget: null,\n\t\t\ttext: '',\n\t\t\tanimationOpen: 'slideDown',\n\t\t\tanimationClose: 'slideUp',\n\t\t\tcallbacks: ['open', 'opened', 'close', 'closed']\n\t\t};\n\n\t\t// Parent Constructor\n\t\tKube.apply(this, arguments);\n\n\t\t// Initialization\n\t\tthis.start();\n\t};\n\n\t// Functionality\n\tKube.Toggleme.prototype = {\n\t\tstart: function start() {\n\t\t\tif (!this.hasTarget()) return;\n\n\t\t\tthis.$element.on(this.opts.toggleEvent + '.' + this.namespace, $.proxy(this.toggle, this));\n\t\t},\n\t\tstop: function stop() {\n\t\t\tthis.$element.off('.' + this.namespace);\n\t\t\tthis.revertText();\n\t\t},\n\t\ttoggle: function toggle(e) {\n\t\t\tif (this.isOpened()) this.close(e);else this.open(e);\n\t\t},\n\t\topen: function open(e) {\n\t\t\tif (e) e.preventDefault();\n\n\t\t\tif (!this.isOpened()) {\n\t\t\t\tthis.storeText();\n\t\t\t\tthis.callback('open');\n\t\t\t\tthis.$target.animation('slideDown', $.proxy(this.onOpened, this));\n\n\t\t\t\t// changes the text of $element with a less delay to smooth\n\t\t\t\tsetTimeout($.proxy(this.replaceText, this), 100);\n\t\t\t}\n\t\t},\n\t\tclose: function close(e) {\n\t\t\tif (e) e.preventDefault();\n\n\t\t\tif (this.isOpened()) {\n\t\t\t\tthis.callback('close');\n\t\t\t\tthis.$target.animation('slideUp', $.proxy(this.onClosed, this));\n\t\t\t}\n\t\t},\n\t\tisOpened: function isOpened() {\n\t\t\treturn this.$target.hasClass('open');\n\t\t},\n\t\tonOpened: function onOpened() {\n\t\t\tthis.$target.addClass('open');\n\t\t\tthis.callback('opened');\n\t\t},\n\t\tonClosed: function onClosed() {\n\t\t\tthis.$target.removeClass('open');\n\t\t\tthis.revertText();\n\t\t\tthis.callback('closed');\n\t\t},\n\t\tstoreText: function storeText() {\n\t\t\tthis.$element.data('replacement-text', this.$element.html());\n\t\t},\n\t\trevertText: function revertText() {\n\t\t\tvar text = this.$element.data('replacement-text');\n\t\t\tif (text) this.$element.html(text);\n\n\t\t\tthis.$element.removeData('replacement-text');\n\t\t},\n\t\treplaceText: function replaceText() {\n\t\t\tif (this.opts.text !== '') {\n\t\t\t\tthis.$element.html(this.opts.text);\n\t\t\t}\n\t\t}\n\t};\n\n\t// Inheritance\n\tKube.Toggleme.inherits(Kube);\n\n\t// Plugin\n\tKube.Plugin.create('Toggleme');\n\tKube.Plugin.autoload('Toggleme');\n})(Kube);\n/**\n * @library Kube Offcanvas\n * @author Imperavi LLC\n * @license MIT\n */\n(function (Kube) {\n\tKube.Offcanvas = function (element, options) {\n\t\tthis.namespace = 'offcanvas';\n\t\tthis.defaults = {\n\t\t\ttarget: null, // selector\n\t\t\tpush: true, // boolean\n\t\t\twidth: '250px', // string\n\t\t\tdirection: 'left', // string: left or right\n\t\t\ttoggleEvent: 'click',\n\t\t\tclickOutside: true, // boolean\n\t\t\tanimationOpen: 'slideInLeft',\n\t\t\tanimationClose: 'slideOutLeft',\n\t\t\tcallbacks: ['open', 'opened', 'close', 'closed']\n\t\t};\n\n\t\t// Parent Constructor\n\t\tKube.apply(this, arguments);\n\n\t\t// Services\n\t\tthis.utils = new Kube.Utils();\n\t\tthis.detect = new Kube.Detect();\n\n\t\t// Initialization\n\t\tthis.start();\n\t};\n\n\t// Functionality\n\tKube.Offcanvas.prototype = {\n\t\tstart: function start() {\n\t\t\tif (!this.hasTarget()) return;\n\n\t\t\tthis.buildTargetWidth();\n\t\t\tthis.buildAnimationDirection();\n\n\t\t\tthis.$close = this.getCloseLink();\n\t\t\tthis.$element.on(this.opts.toggleEvent + '.' + this.namespace, $.proxy(this.toggle, this));\n\t\t\tthis.$target.addClass('offcanvas');\n\t\t},\n\t\tstop: function stop() {\n\t\t\tthis.closeAll();\n\n\t\t\tthis.$element.off('.' + this.namespace);\n\t\t\tthis.$close.off('.' + this.namespace);\n\t\t\t$(document).off('.' + this.namespace);\n\t\t},\n\t\ttoggle: function toggle(e) {\n\t\t\tif (this.isOpened()) this.close(e);else this.open(e);\n\t\t},\n\t\tbuildTargetWidth: function buildTargetWidth() {\n\t\t\tthis.opts.width = $(window).width() < parseInt(this.opts.width) ? '100%' : this.opts.width;\n\t\t},\n\t\tbuildAnimationDirection: function buildAnimationDirection() {\n\t\t\tif (this.opts.direction === 'right') {\n\t\t\t\tthis.opts.animationOpen = 'slideInRight';\n\t\t\t\tthis.opts.animationClose = 'slideOutRight';\n\t\t\t}\n\t\t},\n\t\tgetCloseLink: function getCloseLink() {\n\t\t\treturn this.$target.find('.close');\n\t\t},\n\t\topen: function open(e) {\n\t\t\tif (e) e.preventDefault();\n\n\t\t\tif (!this.isOpened()) {\n\t\t\t\tthis.closeAll();\n\t\t\t\tthis.callback('open');\n\n\t\t\t\tthis.$target.addClass('offcanvas-' + this.opts.direction);\n\t\t\t\tthis.$target.css('width', this.opts.width);\n\n\t\t\t\tthis.pushBody();\n\n\t\t\t\tthis.$target.animation(this.opts.animationOpen, $.proxy(this.onOpened, this));\n\t\t\t}\n\t\t},\n\t\tcloseAll: function closeAll() {\n\t\t\tvar $elms = $(document).find('.offcanvas');\n\t\t\tif ($elms.length !== 0) {\n\t\t\t\t$elms.each(function () {\n\t\t\t\t\tvar $el = $(this);\n\n\t\t\t\t\tif ($el.hasClass('open')) {\n\t\t\t\t\t\t$el.css('width', '').animation('hide');\n\t\t\t\t\t\t$el.removeClass('open offcanvas-left offcanvas-right');\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\t$(document).off('.' + this.namespace);\n\t\t\t\t$('body').css('left', '');\n\t\t\t}\n\t\t},\n\t\tclose: function close(e) {\n\t\t\tif (e) {\n\t\t\t\tvar $el = $(e.target);\n\t\t\t\tvar isTag = $el[0].tagName === 'A' || $el[0].tagName === 'BUTTON';\n\t\t\t\tif (isTag && $el.closest('.offcanvas').length !== 0 && !$el.hasClass('close')) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\te.preventDefault();\n\t\t\t}\n\n\t\t\tif (this.isOpened()) {\n\t\t\t\tthis.utils.enableBodyScroll();\n\t\t\t\tthis.callback('close');\n\t\t\t\tthis.pullBody();\n\t\t\t\tthis.$target.animation(this.opts.animationClose, $.proxy(this.onClosed, this));\n\t\t\t}\n\t\t},\n\t\tisOpened: function isOpened() {\n\t\t\treturn this.$target.hasClass('open');\n\t\t},\n\t\tonOpened: function onOpened() {\n\t\t\tif (this.opts.clickOutside) $(document).on('click.' + this.namespace, $.proxy(this.close, this));\n\t\t\tif (this.detect.isMobileScreen()) $('html').addClass('no-scroll');\n\n\t\t\t$(document).on('keyup.' + this.namespace, $.proxy(this.handleKeyboard, this));\n\t\t\tthis.$close.on('click.' + this.namespace, $.proxy(this.close, this));\n\n\t\t\tthis.utils.disableBodyScroll();\n\t\t\tthis.$target.addClass('open');\n\t\t\tthis.callback('opened');\n\t\t},\n\t\tonClosed: function onClosed() {\n\t\t\tif (this.detect.isMobileScreen()) $('html').removeClass('no-scroll');\n\n\t\t\tthis.$target.css('width', '').removeClass('offcanvas-' + this.opts.direction);\n\n\t\t\tthis.$close.off('.' + this.namespace);\n\t\t\t$(document).off('.' + this.namespace);\n\n\t\t\tthis.$target.removeClass('open');\n\t\t\tthis.callback('closed');\n\t\t},\n\t\thandleKeyboard: function handleKeyboard(e) {\n\t\t\tif (e.which === 27) this.close();\n\t\t},\n\t\tpullBody: function pullBody() {\n\t\t\tif (this.opts.push) {\n\t\t\t\t$('body').animate({ left: 0 }, 350, function () {\n\t\t\t\t\t$(this).removeClass('offcanvas-push-body');\n\t\t\t\t});\n\t\t\t}\n\t\t},\n\t\tpushBody: function pushBody() {\n\t\t\tif (this.opts.push) {\n\t\t\t\tvar properties = this.opts.direction === 'left' ? { 'left': this.opts.width } : { 'left': '-' + this.opts.width };\n\t\t\t\t$('body').addClass('offcanvas-push-body').animate(properties, 200);\n\t\t\t}\n\t\t}\n\t};\n\n\t// Inheritance\n\tKube.Offcanvas.inherits(Kube);\n\n\t// Plugin\n\tKube.Plugin.create('Offcanvas');\n\tKube.Plugin.autoload('Offcanvas');\n})(Kube);\n/**\n * @library Kube Collapse\n * @author Imperavi LLC\n * @license MIT\n */\n(function (Kube) {\n\tKube.Collapse = function (element, options) {\n\t\tthis.namespace = 'collapse';\n\t\tthis.defaults = {\n\t\t\ttarget: null,\n\t\t\ttoggle: true,\n\t\t\tactive: false, // string (hash = tab id selector)\n\t\t\ttoggleClass: 'collapse-toggle',\n\t\t\tboxClass: 'collapse-box',\n\t\t\tcallbacks: ['open', 'opened', 'close', 'closed'],\n\n\t\t\t// private\n\t\t\thashes: [],\n\t\t\tcurrentHash: false,\n\t\t\tcurrentItem: false\n\t\t};\n\n\t\t// Parent Constructor\n\t\tKube.apply(this, arguments);\n\n\t\t// Initialization\n\t\tthis.start();\n\t};\n\n\t// Functionality\n\tKube.Collapse.prototype = {\n\t\tstart: function start() {\n\t\t\t// items\n\t\t\tthis.$items = this.getItems();\n\t\t\tthis.$items.each($.proxy(this.loadItems, this));\n\n\t\t\t// boxes\n\t\t\tthis.$boxes = this.getBoxes();\n\n\t\t\t// active\n\t\t\tthis.setActiveItem();\n\t\t},\n\t\tgetItems: function getItems() {\n\t\t\treturn this.$element.find('.' + this.opts.toggleClass);\n\t\t},\n\t\tgetBoxes: function getBoxes() {\n\t\t\treturn this.$element.find('.' + this.opts.boxClass);\n\t\t},\n\t\tloadItems: function loadItems(i, el) {\n\t\t\tvar item = this.getItem(el);\n\n\t\t\t// set item identificator\n\t\t\titem.$el.attr('rel', item.hash);\n\n\t\t\t// active\n\t\t\tif (!$(item.hash).hasClass('hide')) {\n\t\t\t\tthis.opts.currentItem = item;\n\t\t\t\tthis.opts.active = item.hash;\n\n\t\t\t\titem.$el.addClass('active');\n\t\t\t}\n\n\t\t\t// event\n\t\t\titem.$el.on('click.collapse', $.proxy(this.toggle, this));\n\t\t},\n\t\tsetActiveItem: function setActiveItem() {\n\t\t\tif (this.opts.active !== false) {\n\t\t\t\tthis.opts.currentItem = this.getItemBy(this.opts.active);\n\t\t\t\tthis.opts.active = this.opts.currentItem.hash;\n\t\t\t}\n\n\t\t\tif (this.opts.currentItem !== false) {\n\t\t\t\tthis.addActive(this.opts.currentItem);\n\t\t\t\tthis.opts.currentItem.$box.removeClass('hide');\n\t\t\t}\n\t\t},\n\t\taddActive: function addActive(item) {\n\t\t\titem.$box.removeClass('hide').addClass('open');\n\t\t\titem.$el.addClass('active');\n\n\t\t\tif (item.$caret !== false) item.$caret.removeClass('down').addClass('up');\n\t\t\tif (item.$parent !== false) item.$parent.addClass('active');\n\n\t\t\tthis.opts.currentItem = item;\n\t\t},\n\t\tremoveActive: function removeActive(item) {\n\t\t\titem.$box.removeClass('open');\n\t\t\titem.$el.removeClass('active');\n\n\t\t\tif (item.$caret !== false) item.$caret.addClass('down').removeClass('up');\n\t\t\tif (item.$parent !== false) item.$parent.removeClass('active');\n\n\t\t\tthis.opts.currentItem = false;\n\t\t},\n\t\ttoggle: function toggle(e) {\n\t\t\tif (e) e.preventDefault();\n\n\t\t\tvar target = $(e.target).closest('.' + this.opts.toggleClass).get(0) || e.target;\n\t\t\tvar item = this.getItem(target);\n\n\t\t\tif (this.isOpened(item.hash)) this.close(item.hash);else this.open(e);\n\t\t},\n\t\topenAll: function openAll() {\n\t\t\tthis.$items.addClass('active');\n\t\t\tthis.$boxes.addClass('open').removeClass('hide');\n\t\t},\n\t\topen: function open(e, push) {\n\t\t\tif (typeof e === 'undefined') return;\n\t\t\tif ((typeof e === 'undefined' ? 'undefined' : _typeof(e)) === 'object') e.preventDefault();\n\n\t\t\tvar target = $(e.target).closest('.' + this.opts.toggleClass).get(0) || e.target;\n\t\t\tvar item = (typeof e === 'undefined' ? 'undefined' : _typeof(e)) === 'object' ? this.getItem(target) : this.getItemBy(e);\n\n\t\t\tif (item.$box.hasClass('open')) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (this.opts.toggle) this.closeAll();\n\n\t\t\tthis.callback('open', item);\n\t\t\tthis.addActive(item);\n\n\t\t\titem.$box.animation('slideDown', $.proxy(this.onOpened, this));\n\t\t},\n\t\tonOpened: function onOpened() {\n\t\t\tthis.callback('opened', this.opts.currentItem);\n\t\t},\n\t\tcloseAll: function closeAll() {\n\t\t\tthis.$items.removeClass('active').closest('li').removeClass('active');\n\t\t\tthis.$boxes.removeClass('open').addClass('hide');\n\t\t},\n\t\tclose: function close(num) {\n\t\t\tvar item = this.getItemBy(num);\n\n\t\t\tthis.callback('close', item);\n\n\t\t\tthis.opts.currentItem = item;\n\n\t\t\titem.$box.animation('slideUp', $.proxy(this.onClosed, this));\n\t\t},\n\t\tonClosed: function onClosed() {\n\t\t\tvar item = this.opts.currentItem;\n\n\t\t\tthis.removeActive(item);\n\t\t\tthis.callback('closed', item);\n\t\t},\n\t\tisOpened: function isOpened(hash) {\n\t\t\treturn $(hash).hasClass('open');\n\t\t},\n\t\tgetItem: function getItem(element) {\n\t\t\tvar item = {};\n\n\t\t\titem.$el = $(element);\n\t\t\titem.hash = item.$el.attr('href');\n\t\t\titem.$box = $(item.hash);\n\n\t\t\tvar $parent = item.$el.parent();\n\t\t\titem.$parent = $parent[0].tagName === 'LI' ? $parent : false;\n\n\t\t\tvar $caret = item.$el.find('.caret');\n\t\t\titem.$caret = $caret.length !== 0 ? $caret : false;\n\n\t\t\treturn item;\n\t\t},\n\t\tgetItemBy: function getItemBy(num) {\n\t\t\tvar element = typeof num === 'number' ? this.$items.eq(num - 1) : this.$element.find('[rel=\"' + num + '\"]');\n\n\t\t\treturn this.getItem(element);\n\t\t}\n\t};\n\n\t// Inheritance\n\tKube.Collapse.inherits(Kube);\n\n\t// Plugin\n\tKube.Plugin.create('Collapse');\n\tKube.Plugin.autoload('Collapse');\n})(Kube);\n/**\n * @library Kube Dropdown\n * @author Imperavi LLC\n * @license MIT\n */\n(function (Kube) {\n\tKube.Dropdown = function (element, options) {\n\t\tthis.namespace = 'dropdown';\n\t\tthis.defaults = {\n\t\t\ttarget: null,\n\t\t\ttoggleEvent: 'click',\n\t\t\theight: false, // integer\n\t\t\twidth: false, // integer\n\t\t\tanimationOpen: 'slideDown',\n\t\t\tanimationClose: 'slideUp',\n\t\t\tcaretUp: false,\n\t\t\tcallbacks: ['open', 'opened', 'close', 'closed']\n\t\t};\n\n\t\t// Parent Constructor\n\t\tKube.apply(this, arguments);\n\n\t\t// Services\n\t\tthis.utils = new Kube.Utils();\n\t\tthis.detect = new Kube.Detect();\n\n\t\t// Initialization\n\t\tthis.start();\n\t};\n\n\t// Functionality\n\tKube.Dropdown.prototype = {\n\t\tstart: function start() {\n\t\t\tthis.buildClose();\n\t\t\tthis.buildCaret();\n\n\t\t\tif (this.detect.isMobile()) this.buildMobileAnimation();\n\n\t\t\tthis.$target.addClass('hide');\n\t\t\tthis.$element.on(this.opts.toggleEvent + '.' + this.namespace, $.proxy(this.toggle, this));\n\t\t},\n\t\tstop: function stop() {\n\t\t\tthis.$element.off('.' + this.namespace);\n\t\t\tthis.$target.removeClass('open').addClass('hide');\n\t\t\tthis.disableEvents();\n\t\t},\n\t\tbuildMobileAnimation: function buildMobileAnimation() {\n\t\t\tthis.opts.animationOpen = 'fadeIn';\n\t\t\tthis.opts.animationClose = 'fadeOut';\n\t\t},\n\t\tbuildClose: function buildClose() {\n\t\t\tthis.$close = this.$target.find('.close');\n\t\t},\n\t\tbuildCaret: function buildCaret() {\n\t\t\tthis.$caret = this.getCaret();\n\t\t\tthis.buildCaretPosition();\n\t\t},\n\t\tbuildCaretPosition: function buildCaretPosition() {\n\t\t\tvar height = this.$element.offset().top + this.$element.innerHeight() + this.$target.innerHeight();\n\n\t\t\tif ($(document).height() > height) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.opts.caretUp = true;\n\t\t\tthis.$caret.addClass('up');\n\t\t},\n\t\tgetCaret: function getCaret() {\n\t\t\treturn this.$element.find('.caret');\n\t\t},\n\t\ttoggleCaretOpen: function toggleCaretOpen() {\n\t\t\tif (this.opts.caretUp) this.$caret.removeClass('up').addClass('down');else this.$caret.removeClass('down').addClass('up');\n\t\t},\n\t\ttoggleCaretClose: function toggleCaretClose() {\n\t\t\tif (this.opts.caretUp) this.$caret.removeClass('down').addClass('up');else this.$caret.removeClass('up').addClass('down');\n\t\t},\n\t\ttoggle: function toggle(e) {\n\t\t\tif (this.isOpened()) this.close(e);else this.open(e);\n\t\t},\n\t\topen: function open(e) {\n\t\t\tif (e) e.preventDefault();\n\n\t\t\tthis.callback('open');\n\t\t\t$('.dropdown').removeClass('open').addClass('hide');\n\n\t\t\tif (this.opts.height) this.$target.css('min-height', this.opts.height + 'px');\n\t\t\tif (this.opts.width) this.$target.width(this.opts.width);\n\n\t\t\tthis.setPosition();\n\t\t\tthis.toggleCaretOpen();\n\n\t\t\tthis.$target.animation(this.opts.animationOpen, $.proxy(this.onOpened, this));\n\t\t},\n\t\tclose: function close(e) {\n\t\t\tif (!this.isOpened()) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (e) {\n\t\t\t\tif (this.shouldNotBeClosed(e.target)) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\te.preventDefault();\n\t\t\t}\n\n\t\t\tthis.utils.enableBodyScroll();\n\t\t\tthis.callback('close');\n\t\t\tthis.toggleCaretClose();\n\n\t\t\tthis.$target.animation(this.opts.animationClose, $.proxy(this.onClosed, this));\n\t\t},\n\t\tonClosed: function onClosed() {\n\t\t\tthis.$target.removeClass('open');\n\t\t\tthis.disableEvents();\n\t\t\tthis.callback('closed');\n\t\t},\n\t\tonOpened: function onOpened() {\n\t\t\tthis.$target.addClass('open');\n\t\t\tthis.enableEvents();\n\t\t\tthis.callback('opened');\n\t\t},\n\t\tisOpened: function isOpened() {\n\t\t\treturn this.$target.hasClass('open');\n\t\t},\n\t\tenableEvents: function enableEvents() {\n\t\t\tif (this.detect.isDesktop()) {\n\t\t\t\tthis.$target.on('mouseover.' + this.namespace, $.proxy(this.utils.disableBodyScroll, this.utils)).on('mouseout.' + this.namespace, $.proxy(this.utils.enableBodyScroll, this.utils));\n\t\t\t}\n\n\t\t\t$(document).on('scroll.' + this.namespace, $.proxy(this.setPosition, this));\n\t\t\t$(window).on('resize.' + this.namespace, $.proxy(this.setPosition, this));\n\t\t\t$(document).on('click.' + this.namespace + ' touchstart.' + this.namespace, $.proxy(this.close, this));\n\t\t\t$(document).on('keydown.' + this.namespace, $.proxy(this.handleKeyboard, this));\n\t\t\tthis.$target.find('[data-action=\"dropdown-close\"]').on('click.' + this.namespace, $.proxy(this.close, this));\n\t\t},\n\t\tdisableEvents: function disableEvents() {\n\t\t\tthis.$target.off('.' + this.namespace);\n\t\t\t$(document).off('.' + this.namespace);\n\t\t\t$(window).off('.' + this.namespace);\n\t\t},\n\t\thandleKeyboard: function handleKeyboard(e) {\n\t\t\tif (e.which === 27) this.close(e);\n\t\t},\n\t\tshouldNotBeClosed: function shouldNotBeClosed(el) {\n\t\t\tif ($(el).attr('data-action') === 'dropdown-close' || el === this.$close[0]) {\n\t\t\t\treturn false;\n\t\t\t} else if ($(el).closest('.dropdown').length === 0) {\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\treturn true;\n\t\t},\n\t\tisNavigationFixed: function isNavigationFixed() {\n\t\t\treturn this.$element.closest('.fixed').length !== 0;\n\t\t},\n\t\tgetPlacement: function getPlacement(height) {\n\t\t\treturn $(document).height() < height ? 'top' : 'bottom';\n\t\t},\n\t\tgetOffset: function getOffset(position) {\n\t\t\treturn this.isNavigationFixed() ? this.$element.position() : this.$element.offset();\n\t\t},\n\t\tgetPosition: function getPosition() {\n\t\t\treturn this.isNavigationFixed() ? 'fixed' : 'absolute';\n\t\t},\n\t\tsetPosition: function setPosition() {\n\t\t\tif (this.detect.isMobile()) {\n\t\t\t\tthis.$target.addClass('dropdown-mobile');\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tvar position = this.getPosition();\n\t\t\tvar coords = this.getOffset(position);\n\t\t\tvar height = this.$target.innerHeight();\n\t\t\tvar width = this.$target.innerWidth();\n\t\t\tvar placement = this.getPlacement(coords.top + height + this.$element.innerHeight());\n\t\t\tvar leftFix = $(window).width() < coords.left + width ? width - this.$element.innerWidth() : 0;\n\t\t\tvar top,\n\t\t\t    left = coords.left - leftFix;\n\n\t\t\tif (placement === 'bottom') {\n\t\t\t\tif (!this.isOpened()) this.$caret.removeClass('up').addClass('down');\n\n\t\t\t\tthis.opts.caretUp = false;\n\t\t\t\ttop = coords.top + this.$element.outerHeight() + 1;\n\t\t\t} else {\n\t\t\t\tthis.opts.animationOpen = 'show';\n\t\t\t\tthis.opts.animationClose = 'hide';\n\n\t\t\t\tif (!this.isOpened()) this.$caret.addClass('up').removeClass('down');\n\n\t\t\t\tthis.opts.caretUp = true;\n\t\t\t\ttop = coords.top - height - 1;\n\t\t\t}\n\n\t\t\tthis.$target.css({ position: position, top: top + 'px', left: left + 'px' });\n\t\t}\n\t};\n\n\t// Inheritance\n\tKube.Dropdown.inherits(Kube);\n\n\t// Plugin\n\tKube.Plugin.create('Dropdown');\n\tKube.Plugin.autoload('Dropdown');\n})(Kube);\n/**\n * @library Kube Tabs\n * @author Imperavi LLC\n * @license MIT\n */\n(function (Kube) {\n\tKube.Tabs = function (element, options) {\n\t\tthis.namespace = 'tabs';\n\t\tthis.defaults = {\n\t\t\tequals: false,\n\t\t\tactive: false, // string (hash = tab id selector)\n\t\t\tlive: false, // class selector\n\t\t\thash: true, //boolean\n\t\t\tcallbacks: ['init', 'next', 'prev', 'open', 'opened', 'close', 'closed']\n\t\t};\n\n\t\t// Parent Constructor\n\t\tKube.apply(this, arguments);\n\n\t\t// Initialization\n\t\tthis.start();\n\t};\n\n\t// Functionality\n\tKube.Tabs.prototype = {\n\t\tstart: function start() {\n\t\t\tif (this.opts.live !== false) this.buildLiveTabs();\n\n\t\t\tthis.tabsCollection = [];\n\t\t\tthis.hashesCollection = [];\n\t\t\tthis.currentHash = [];\n\t\t\tthis.currentItem = false;\n\n\t\t\t// items\n\t\t\tthis.$items = this.getItems();\n\t\t\tthis.$items.each($.proxy(this.loadItems, this));\n\n\t\t\t// tabs\n\t\t\tthis.$tabs = this.getTabs();\n\n\t\t\t// location hash\n\t\t\tthis.currentHash = this.getLocationHash();\n\n\t\t\t// close all\n\t\t\tthis.closeAll();\n\n\t\t\t// active & height\n\t\t\tthis.setActiveItem();\n\t\t\tthis.setItemHeight();\n\n\t\t\t// callback\n\t\t\tthis.callback('init');\n\t\t},\n\t\tgetTabs: function getTabs() {\n\t\t\treturn $(this.tabsCollection).map(function () {\n\t\t\t\treturn this.toArray();\n\t\t\t});\n\t\t},\n\t\tgetItems: function getItems() {\n\t\t\treturn this.$element.find('a');\n\t\t},\n\t\tloadItems: function loadItems(i, el) {\n\t\t\tvar item = this.getItem(el);\n\n\t\t\t// set item identificator\n\t\t\titem.$el.attr('rel', item.hash);\n\n\t\t\t// collect item\n\t\t\tthis.collectItem(item);\n\n\t\t\t// active\n\t\t\tif (item.$parent.hasClass('active')) {\n\t\t\t\tthis.currentItem = item;\n\t\t\t\tthis.opts.active = item.hash;\n\t\t\t}\n\n\t\t\t// event\n\t\t\titem.$el.on('click.tabs', $.proxy(this.open, this));\n\t\t},\n\t\tcollectItem: function collectItem(item) {\n\t\t\tthis.tabsCollection.push(item.$tab);\n\t\t\tthis.hashesCollection.push(item.hash);\n\t\t},\n\t\tbuildLiveTabs: function buildLiveTabs() {\n\t\t\tvar $layers = $(this.opts.live);\n\n\t\t\tif ($layers.length === 0) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.$liveTabsList = $('<ul />');\n\t\t\t$layers.each($.proxy(this.buildLiveItem, this));\n\n\t\t\tthis.$element.html('').append(this.$liveTabsList);\n\t\t},\n\t\tbuildLiveItem: function buildLiveItem(i, tab) {\n\t\t\tvar $tab = $(tab);\n\t\t\tvar $li = $('<li />');\n\t\t\tvar $a = $('<a />');\n\t\t\tvar index = i + 1;\n\n\t\t\t$tab.attr('id', this.getLiveItemId($tab, index));\n\n\t\t\tvar hash = '#' + $tab.attr('id');\n\t\t\tvar title = this.getLiveItemTitle($tab);\n\n\t\t\t$a.attr('href', hash).attr('rel', hash).text(title);\n\t\t\t$li.append($a);\n\n\t\t\tthis.$liveTabsList.append($li);\n\t\t},\n\t\tgetLiveItemId: function getLiveItemId($tab, index) {\n\t\t\treturn typeof $tab.attr('id') === 'undefined' ? this.opts.live.replace('.', '') + index : $tab.attr('id');\n\t\t},\n\t\tgetLiveItemTitle: function getLiveItemTitle($tab) {\n\t\t\treturn typeof $tab.attr('data-title') === 'undefined' ? $tab.attr('id') : $tab.attr('data-title');\n\t\t},\n\t\tsetActiveItem: function setActiveItem() {\n\t\t\tif (this.currentHash) {\n\t\t\t\tthis.currentItem = this.getItemBy(this.currentHash);\n\t\t\t\tthis.opts.active = this.currentHash;\n\t\t\t} else if (this.opts.active === false) {\n\t\t\t\tthis.currentItem = this.getItem(this.$items.first());\n\t\t\t\tthis.opts.active = this.currentItem.hash;\n\t\t\t}\n\n\t\t\tthis.addActive(this.currentItem);\n\t\t},\n\t\taddActive: function addActive(item) {\n\t\t\titem.$parent.addClass('active');\n\t\t\titem.$tab.removeClass('hide').addClass('open');\n\n\t\t\tthis.currentItem = item;\n\t\t},\n\t\tremoveActive: function removeActive(item) {\n\t\t\titem.$parent.removeClass('active');\n\t\t\titem.$tab.addClass('hide').removeClass('open');\n\n\t\t\tthis.currentItem = false;\n\t\t},\n\t\tnext: function next(e) {\n\t\t\tif (e) e.preventDefault();\n\n\t\t\tvar item = this.getItem(this.fetchElement('next'));\n\n\t\t\tthis.open(item.hash);\n\t\t\tthis.callback('next', item);\n\t\t},\n\t\tprev: function prev(e) {\n\t\t\tif (e) e.preventDefault();\n\n\t\t\tvar item = this.getItem(this.fetchElement('prev'));\n\n\t\t\tthis.open(item.hash);\n\t\t\tthis.callback('prev', item);\n\t\t},\n\t\tfetchElement: function fetchElement(type) {\n\t\t\tvar element;\n\t\t\tif (this.currentItem !== false) {\n\t\t\t\t// prev or next\n\t\t\t\telement = this.currentItem.$parent[type]().find('a');\n\n\t\t\t\tif (element.length === 0) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t// first\n\t\t\t\telement = this.$items[0];\n\t\t\t}\n\n\t\t\treturn element;\n\t\t},\n\t\topen: function open(e, push) {\n\t\t\tif (typeof e === 'undefined') return;\n\t\t\tif ((typeof e === 'undefined' ? 'undefined' : _typeof(e)) === 'object') e.preventDefault();\n\n\t\t\tvar item = (typeof e === 'undefined' ? 'undefined' : _typeof(e)) === 'object' ? this.getItem(e.target) : this.getItemBy(e);\n\t\t\tthis.closeAll();\n\n\t\t\tthis.callback('open', item);\n\t\t\tthis.addActive(item);\n\n\t\t\t// push state (doesn't need to push at the start)\n\t\t\tthis.pushStateOpen(push, item);\n\t\t\tthis.callback('opened', item);\n\t\t},\n\t\tpushStateOpen: function pushStateOpen(push, item) {\n\t\t\tif (push !== false && this.opts.hash !== false) {\n\t\t\t\thistory.pushState(false, false, item.hash);\n\t\t\t}\n\t\t},\n\t\tclose: function close(num) {\n\t\t\tvar item = this.getItemBy(num);\n\n\t\t\tif (!item.$parent.hasClass('active')) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.callback('close', item);\n\t\t\tthis.removeActive(item);\n\t\t\tthis.pushStateClose();\n\t\t\tthis.callback('closed', item);\n\t\t},\n\t\tpushStateClose: function pushStateClose() {\n\t\t\tif (this.opts.hash !== false) {\n\t\t\t\thistory.pushState(false, false, ' ');\n\t\t\t}\n\t\t},\n\t\tcloseAll: function closeAll() {\n\t\t\tthis.$tabs.removeClass('open').addClass('hide');\n\t\t\tthis.$items.parent().removeClass('active');\n\t\t},\n\t\tgetItem: function getItem(element) {\n\t\t\tvar item = {};\n\n\t\t\titem.$el = $(element);\n\t\t\titem.hash = item.$el.attr('href');\n\t\t\titem.$parent = item.$el.parent();\n\t\t\titem.$tab = $(item.hash);\n\n\t\t\treturn item;\n\t\t},\n\t\tgetItemBy: function getItemBy(num) {\n\t\t\tvar element = typeof num === 'number' ? this.$items.eq(num - 1) : this.$element.find('[rel=\"' + num + '\"]');\n\n\t\t\treturn this.getItem(element);\n\t\t},\n\t\tgetLocationHash: function getLocationHash() {\n\t\t\tif (this.opts.hash === false) {\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\treturn this.isHash() ? top.location.hash : false;\n\t\t},\n\t\tisHash: function isHash() {\n\t\t\treturn !(top.location.hash === '' || $.inArray(top.location.hash, this.hashesCollection) === -1);\n\t\t},\n\t\tsetItemHeight: function setItemHeight() {\n\t\t\tif (this.opts.equals) {\n\t\t\t\tvar minHeight = this.getItemMaxHeight() + 'px';\n\t\t\t\tthis.$tabs.css('min-height', minHeight);\n\t\t\t}\n\t\t},\n\t\tgetItemMaxHeight: function getItemMaxHeight() {\n\t\t\tvar max = 0;\n\t\t\tthis.$tabs.each(function () {\n\t\t\t\tvar h = $(this).height();\n\t\t\t\tmax = h > max ? h : max;\n\t\t\t});\n\n\t\t\treturn max;\n\t\t}\n\t};\n\n\t// Inheritance\n\tKube.Tabs.inherits(Kube);\n\n\t// Plugin\n\tKube.Plugin.create('Tabs');\n\tKube.Plugin.autoload('Tabs');\n})(Kube);\n/**\n * @library Kube Modal\n * @author Imperavi LLC\n * @license MIT\n */\n(function ($) {\n\t$.modalcurrent = null;\n\t$.modalwindow = function (options) {\n\t\tvar opts = $.extend({}, options, { show: true });\n\t\tvar $element = $('<span />');\n\n\t\t$element.modal(opts);\n\t};\n})(jQuery);\n\n(function (Kube) {\n\tKube.Modal = function (element, options) {\n\t\tthis.namespace = 'modal';\n\t\tthis.defaults = {\n\t\t\ttarget: null,\n\t\t\tshow: false,\n\t\t\turl: false,\n\t\t\theader: false,\n\t\t\twidth: '600px', // string\n\t\t\theight: false, // or string\n\t\t\tmaxHeight: false,\n\t\t\tposition: 'center', // top or center\n\t\t\toverlay: true,\n\t\t\tappendForms: false,\n\t\t\tappendFields: false,\n\t\t\tanimationOpen: 'show',\n\t\t\tanimationClose: 'hide',\n\t\t\tcallbacks: ['open', 'opened', 'close', 'closed']\n\t\t};\n\n\t\t// Parent Constructor\n\t\tKube.apply(this, arguments);\n\n\t\t// Services\n\t\tthis.utils = new Kube.Utils();\n\t\tthis.detect = new Kube.Detect();\n\n\t\t// Initialization\n\t\tthis.start();\n\t};\n\n\t// Functionality\n\tKube.Modal.prototype = {\n\t\tstart: function start() {\n\t\t\tif (!this.hasTarget()) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (this.opts.show) this.load();else this.$element.on('click.' + this.namespace, $.proxy(this.load, this));\n\t\t},\n\t\tbuildModal: function buildModal() {\n\t\t\tthis.$modal = this.$target.find('.modal');\n\t\t\tthis.$header = this.$target.find('.modal-header');\n\t\t\tthis.$close = this.$target.find('.close');\n\t\t\tthis.$body = this.$target.find('.modal-body');\n\t\t},\n\t\tbuildOverlay: function buildOverlay() {\n\t\t\tif (this.opts.overlay === false) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif ($('#modal-overlay').length !== 0) {\n\t\t\t\tthis.$overlay = $('#modal-overlay');\n\t\t\t} else {\n\t\t\t\tthis.$overlay = $('<div id=\"modal-overlay\">').addClass('hide');\n\t\t\t\t$('body').prepend(this.$overlay);\n\t\t\t}\n\n\t\t\tthis.$overlay.addClass('overlay');\n\t\t},\n\t\tbuildHeader: function buildHeader() {\n\t\t\tif (this.opts.header) this.$header.html(this.opts.header);\n\t\t},\n\t\tload: function load(e) {\n\t\t\tthis.buildModal();\n\t\t\tthis.buildOverlay();\n\t\t\tthis.buildHeader();\n\n\t\t\tif (this.opts.url) this.buildContent();else this.open(e);\n\t\t},\n\t\topen: function open(e) {\n\t\t\tif (e) e.preventDefault();\n\n\t\t\tif (this.isOpened()) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (this.detect.isMobile()) this.opts.width = '96%';\n\t\t\tif (this.opts.overlay) this.$overlay.removeClass('hide');\n\n\t\t\tthis.$target.removeClass('hide');\n\t\t\tthis.$modal.removeClass('hide');\n\n\t\t\tthis.enableEvents();\n\t\t\tthis.findActions();\n\n\t\t\tthis.resize();\n\t\t\t$(window).on('resize.' + this.namespace, $.proxy(this.resize, this));\n\n\t\t\tif (this.detect.isDesktop()) this.utils.disableBodyScroll();\n\n\t\t\t// enter\n\t\t\tthis.$modal.find('input[type=text],input[type=url],input[type=email]').on('keydown.' + this.namespace, $.proxy(this.handleEnter, this));\n\n\t\t\tthis.callback('open');\n\t\t\tthis.$modal.animation(this.opts.animationOpen, $.proxy(this.onOpened, this));\n\t\t},\n\t\tclose: function close(e) {\n\t\t\tif (!this.$modal || !this.isOpened()) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (e) {\n\t\t\t\tif (this.shouldNotBeClosed(e.target)) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\te.preventDefault();\n\t\t\t}\n\n\t\t\tthis.callback('close');\n\t\t\tthis.disableEvents();\n\n\t\t\tthis.$modal.animation(this.opts.animationClose, $.proxy(this.onClosed, this));\n\n\t\t\tif (this.opts.overlay) this.$overlay.animation(this.opts.animationClose);\n\t\t},\n\t\tonOpened: function onOpened() {\n\t\t\tthis.$modal.addClass('open');\n\t\t\tthis.callback('opened');\n\n\t\t\t$.modalcurrent = this;\n\t\t},\n\t\tonClosed: function onClosed() {\n\t\t\tthis.callback('closed');\n\n\t\t\tthis.$target.addClass('hide');\n\t\t\tthis.$modal.removeClass('open');\n\n\t\t\tif (this.detect.isDesktop()) this.utils.enableBodyScroll();\n\n\t\t\tthis.$body.css('height', '');\n\t\t\t$.modalcurrent = null;\n\t\t},\n\t\tisOpened: function isOpened() {\n\t\t\treturn this.$modal.hasClass('open');\n\t\t},\n\t\tgetData: function getData() {\n\t\t\tvar formdata = new Kube.FormData(this);\n\t\t\tformdata.set('');\n\n\t\t\treturn formdata.get();\n\t\t},\n\t\tbuildContent: function buildContent() {\n\t\t\t$.ajax({\n\t\t\t\turl: this.opts.url + '?' + new Date().getTime(),\n\t\t\t\tcache: false,\n\t\t\t\ttype: 'post',\n\t\t\t\tdata: this.getData(),\n\t\t\t\tsuccess: $.proxy(function (data) {\n\t\t\t\t\tthis.$body.html(data);\n\t\t\t\t\tthis.open();\n\t\t\t\t}, this)\n\t\t\t});\n\t\t},\n\t\tbuildWidth: function buildWidth() {\n\t\t\tvar width = this.opts.width;\n\t\t\tvar top = '2%';\n\t\t\tvar bottom = '2%';\n\t\t\tvar percent = width.match(/%$/);\n\n\t\t\tif (parseInt(this.opts.width) > $(window).width() && !percent) {\n\t\t\t\twidth = '96%';\n\t\t\t} else if (!percent) {\n\t\t\t\ttop = '16px';\n\t\t\t\tbottom = '16px';\n\t\t\t}\n\n\t\t\tthis.$modal.css({ 'width': width, 'margin-top': top, 'margin-bottom': bottom });\n\t\t},\n\t\tbuildPosition: function buildPosition() {\n\t\t\tif (this.opts.position !== 'center') {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tvar windowHeight = $(window).height();\n\t\t\tvar height = this.$modal.outerHeight();\n\t\t\tvar top = windowHeight / 2 - height / 2 + 'px';\n\n\t\t\tif (this.detect.isMobile()) top = '2%';else if (height > windowHeight) top = '16px';\n\n\t\t\tthis.$modal.css('margin-top', top);\n\t\t},\n\t\tbuildHeight: function buildHeight() {\n\t\t\tvar windowHeight = $(window).height();\n\n\t\t\tif (this.opts.maxHeight) {\n\t\t\t\tvar padding = parseInt(this.$body.css('padding-top')) + parseInt(this.$body.css('padding-bottom'));\n\t\t\t\tvar margin = parseInt(this.$modal.css('margin-top')) + parseInt(this.$modal.css('margin-bottom'));\n\t\t\t\tvar height = windowHeight - this.$header.innerHeight() - padding - margin;\n\n\t\t\t\tthis.$body.height(height);\n\t\t\t} else if (this.opts.height !== false) {\n\t\t\t\tthis.$body.css('height', this.opts.height);\n\t\t\t}\n\n\t\t\tvar modalHeight = this.$modal.outerHeight();\n\t\t\tif (modalHeight > windowHeight) {\n\t\t\t\tthis.opts.animationOpen = 'show';\n\t\t\t\tthis.opts.animationClose = 'hide';\n\t\t\t}\n\t\t},\n\t\tresize: function resize() {\n\t\t\tthis.buildWidth();\n\t\t\tthis.buildPosition();\n\t\t\tthis.buildHeight();\n\t\t},\n\t\tenableEvents: function enableEvents() {\n\t\t\tthis.$close.on('click.' + this.namespace, $.proxy(this.close, this));\n\t\t\t$(document).on('keyup.' + this.namespace, $.proxy(this.handleEscape, this));\n\t\t\tthis.$target.on('click.' + this.namespace, $.proxy(this.close, this));\n\t\t},\n\t\tdisableEvents: function disableEvents() {\n\t\t\tthis.$close.off('.' + this.namespace);\n\t\t\t$(document).off('.' + this.namespace);\n\t\t\tthis.$target.off('.' + this.namespace);\n\t\t\t$(window).off('.' + this.namespace);\n\t\t},\n\t\tfindActions: function findActions() {\n\t\t\tthis.$body.find('[data-action=\"modal-close\"]').on('mousedown.' + this.namespace, $.proxy(this.close, this));\n\t\t},\n\t\tsetHeader: function setHeader(header) {\n\t\t\tthis.$header.html(header);\n\t\t},\n\t\tsetContent: function setContent(content) {\n\t\t\tthis.$body.html(content);\n\t\t},\n\t\tsetWidth: function setWidth(width) {\n\t\t\tthis.opts.width = width;\n\t\t\tthis.resize();\n\t\t},\n\t\tgetModal: function getModal() {\n\t\t\treturn this.$modal;\n\t\t},\n\t\tgetBody: function getBody() {\n\t\t\treturn this.$body;\n\t\t},\n\t\tgetHeader: function getHeader() {\n\t\t\treturn this.$header;\n\t\t},\n\t\thandleEnter: function handleEnter(e) {\n\t\t\tif (e.which === 13) {\n\t\t\t\te.preventDefault();\n\t\t\t\tthis.close(false);\n\t\t\t}\n\t\t},\n\t\thandleEscape: function handleEscape(e) {\n\t\t\treturn e.which === 27 ? this.close(false) : true;\n\t\t},\n\t\tshouldNotBeClosed: function shouldNotBeClosed(el) {\n\t\t\tif ($(el).attr('data-action') === 'modal-close' || el === this.$close[0]) {\n\t\t\t\treturn false;\n\t\t\t} else if ($(el).closest('.modal').length === 0) {\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\treturn true;\n\t\t}\n\t};\n\n\t// Inheritance\n\tKube.Modal.inherits(Kube);\n\n\t// Plugin\n\tKube.Plugin.create('Modal');\n\tKube.Plugin.autoload('Modal');\n})(Kube);\n","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.default = AddBrushingCapability;\n\nvar _d = require('d3');\n\nvar d3 = _interopRequireWildcard(_d);\n\nvar _jquery = require('jquery');\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction AddBrushingCapability(MG) {\n\n    /*\n    The MIT License (MIT)\n     Copyright (c) 2015 Dan de Havilland\n     Permission is hereby granted, free of charge, to any person obtaining a copy\n    of this software and associated documentation files (the \"Software\"), to deal\n    in the Software without restriction, including without limitation the rights\n    to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n    copies of the Software, and to permit persons to whom the Software is\n    furnished to do so, subject to the following conditions:\n     The above copyright notice and this permission notice shall be included in all\n    copies or substantial portions of the Software.\n     THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n    IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n    FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n    AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n    LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n    OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n    SOFTWARE.\n    */\n\n    MG.line_brushing = {\n        set_brush_as_base: function set_brush_as_base(target) {\n            var svg = d3.select(target).select('svg'),\n                current,\n                history = brushHistory[target];\n\n            svg.classed('mg-brushed', false);\n\n            if (history) {\n                history.brushed = false;\n\n                current = history.current;\n                history.original = current;\n\n                args.min_x = current.min_x;\n                args.max_x = current.max_x;\n                args.min_y = current.min_y;\n                args.max_y = current.max_y;\n\n                history.steps = [];\n            }\n        },\n\n        zoom_in: function zoom_in(target, options) {},\n\n        zoom_out: function zoom_out(target, options) {}\n    };\n\n    /* helpers */\n    function get_brush_interval(args) {\n        var resolution = args.brushing_interval,\n            interval;\n\n        if (!resolution) {\n            if (args.time_series) {\n                resolution = d3.timeDay;\n            } else {\n                resolution = 1;\n            }\n        }\n\n        // work with N as integer\n        if (typeof resolution === 'number') {\n            interval = {\n                round: function round(val) {\n                    return resolution * Math.round(val / resolution);\n                },\n                offset: function offset(val, count) {\n                    return val + resolution * count;\n                }\n            };\n        }\n        // work with d3.time.[interval]\n        else if (typeof resolution.round === 'function' && typeof resolution.offset === 'function') {\n                interval = resolution;\n            } else {\n                console.warn('The `brushing_interval` provided is invalid. It must be either a number or expose both `round` and `offset` methods');\n            }\n\n        return interval;\n    }\n\n    function is_within_bounds(datum, args) {\n        var x = +datum[args.x_accessor],\n            y = +datum[args.y_accessor];\n\n        return x >= (+args.processed.min_x || x) && x <= (+args.processed.max_x || x) && y >= (+args.processed.min_y || y) && y <= (+args.processed.max_y || y);\n    }\n\n    /**\n      Brushing for line charts\n       1. hooks\n    */\n\n    var brushHistory = {},\n        args;\n\n    MG.add_hook('global.defaults', function (args) {\n        // enable brushing unless it's explicitly disabled\n        args.brushing = args.brushing !== false;\n        if (args.brushing) {\n            args.brushing_history = args.brushing_history !== false;\n            args.aggregate_rollover = true;\n        }\n    });\n\n    function brushing() {\n        var chartContext = this;\n\n        args = this.args;\n\n        if (args.brushing === false) {\n            return this;\n        }\n\n        if (!brushHistory[args.target] || !brushHistory[args.target].brushed) {\n            brushHistory[args.target] = {\n                brushed: false,\n                steps: [],\n                original: {\n                    min_x: +args.processed.min_x,\n                    max_x: +args.processed.max_x,\n                    min_y: +args.processed.min_y,\n                    max_y: +args.processed.max_y\n                }\n            };\n        }\n\n        var isDragging = false,\n            mouseDown = false,\n            originX,\n            svg = d3.select(args.target).select('svg'),\n            body = d3.select('body'),\n            rollover = svg.select('.mg-rollover-rect, .mg-voronoi'),\n            brushingGroup,\n            extentRect;\n\n        rollover.classed('mg-brush-container', true);\n\n        brushingGroup = rollover.insert('g', '*').classed('mg-brush', true);\n\n        extentRect = brushingGroup.append('rect').attr('opacity', 0).attr('y', args.top).attr('height', args.height - args.bottom - args.top - args.buffer).classed('mg-extent', true);\n\n        // mousedown, start area selection\n        svg.on('mousedown', function () {\n            mouseDown = true;\n            isDragging = false;\n            originX = d3.mouse(this)[0];\n            svg.classed('mg-brushed', false);\n            svg.classed('mg-brushing-in-progress', true);\n            extentRect.attr({\n                x: d3.mouse(this)[0],\n                opacity: 0,\n                width: 0\n            });\n        });\n\n        // mousemove / drag, expand area selection\n        svg.on('mousemove', function () {\n            if (mouseDown) {\n                isDragging = true;\n                rollover.classed('mg-brushing', true);\n\n                var mouseX = d3.mouse(this)[0],\n                    newX = Math.min(originX, mouseX),\n                    width = Math.max(originX, mouseX) - newX;\n\n                extentRect.attr('x', newX).attr('width', width).attr('opacity', 1);\n            }\n        });\n\n        // mouseup, finish area selection\n        svg.on('mouseup', function () {\n            mouseDown = false;\n            svg.classed('mg-brushing-in-progress', false);\n\n            var xScale = args.scales.X,\n                yScale = args.scales.Y,\n                flatData = [].concat.apply([], args.data),\n                boundedData,\n                yBounds,\n                xBounds,\n                extentX0 = +extentRect.attr('x'),\n                extentX1 = extentX0 + +extentRect.attr('width'),\n                interval = get_brush_interval(args),\n                offset = 0,\n                mapDtoX = function mapDtoX(d) {\n                return +d[args.x_accessor];\n            },\n                mapDtoY = function mapDtoY(d) {\n                return +d[args.y_accessor];\n            };\n\n            // if we're zooming in: calculate the domain for x and y axes based on the selected rect\n            if (isDragging) {\n                isDragging = false;\n\n                if (brushHistory[args.target].brushed) {\n                    brushHistory[args.target].steps.push({\n                        max_x: args.brushed_max_x || args.processed.max_x,\n                        min_x: args.brushed_min_x || args.processed.min_x,\n                        max_y: args.brushed_max_y || args.processed.max_y,\n                        min_y: args.brushed_min_y || args.processed.min_y\n                    });\n                }\n\n                brushHistory[args.target].brushed = true;\n\n                boundedData = [];\n                // is there at least one data point in the chosen selection? if not, increase the range until there is.\n                var iterations = 0;\n                while (boundedData.length === 0 && iterations <= flatData.length) {\n\n                    var xValX0 = xScale.invert(extentX0);\n                    var xValX1 = xScale.invert(extentX1);\n                    xValX0 = xValX0 instanceof Date ? xValX0 : interval.round(xValX0);\n                    xValX1 = xValX1 instanceof Date ? xValX1 : interval.round(xValX1);\n\n                    args.brushed_min_x = xValX0;\n                    args.brushed_max_x = Math.max(interval.offset(args.min_x, 1), xValX1);\n\n                    boundedData = flatData.filter(function (d) {\n                        var val = d[args.x_accessor];\n                        return val >= args.brushed_min_x && val <= args.brushed_max_x;\n                    });\n\n                    iterations++;\n                }\n\n                xBounds = d3.extent(boundedData, mapDtoX);\n                args.brushed_min_x = +xBounds[0];\n                args.brushed_max_x = +xBounds[1];\n                xScale.domain(xBounds);\n\n                yBounds = d3.extent(boundedData, mapDtoY);\n                // add 10% padding on the y axis for better display\n                // @TODO: make this an option\n                args.brushed_min_y = yBounds[0] * 0.9;\n                args.brushed_max_y = yBounds[1] * 1.1;\n                yScale.domain(yBounds);\n            }\n            // zooming out on click, maintaining the step history\n            else if (args.brushing_history) {\n                    if (brushHistory[args.target].brushed) {\n                        var previousBrush = brushHistory[args.target].steps.pop();\n                        if (previousBrush) {\n                            args.brushed_max_x = previousBrush.max_x;\n                            args.brushed_min_x = previousBrush.min_x;\n                            args.brushed_max_y = previousBrush.max_y;\n                            args.brushed_min_y = previousBrush.min_y;\n\n                            xBounds = [args.brushed_min_x, args.brushed_max_x];\n                            yBounds = [args.brushed_min_y, args.brushed_max_y];\n                            xScale.domain(xBounds);\n                            yScale.domain(yBounds);\n                        } else {\n                            brushHistory[args.target].brushed = false;\n\n                            delete args.brushed_max_x;\n                            delete args.brushed_min_x;\n                            delete args.brushed_max_y;\n                            delete args.brushed_min_y;\n\n                            xBounds = [brushHistory[args.target].original.min_x, brushHistory[args.target].original.max_x];\n\n                            yBounds = [brushHistory[args.target].original.min_y, brushHistory[args.target].original.max_y];\n                        }\n                    }\n                }\n\n            // has anything changed?\n            if (xBounds && yBounds) {\n                if (xBounds[0] < xBounds[1]) {\n                    // trigger the brushing callback\n\n                    var step = {\n                        min_x: xBounds[0],\n                        max_x: xBounds[1],\n                        min_y: yBounds[0],\n                        max_y: yBounds[1]\n                    };\n\n                    brushHistory[args.target].current = step;\n\n                    if (args.after_brushing) {\n                        args.after_brushing.apply(this, [step]);\n                    }\n                }\n\n                // redraw the chart\n                if (!args.brushing_manual_redraw) {\n                    MG.data_graphic(args);\n                }\n            }\n        });\n\n        return this;\n    }\n\n    MG.add_hook('line.after_init', function (lineChart) {\n        brushing.apply(lineChart);\n    });\n\n    function processXAxis(args, min_x, max_x) {\n        if (args.brushing) {\n            args.processed.min_x = args.brushed_min_x ? Math.max(args.brushed_min_x, min_x) : min_x;\n            args.processed.max_x = args.brushed_max_x ? Math.min(args.brushed_max_x, max_x) : max_x;\n        }\n    }\n\n    MG.add_hook('x_axis.process_min_max', processXAxis);\n\n    function processYAxis(args) {\n        if (args.brushing && (args.brushed_min_y || args.brushed_max_y)) {\n            args.processed.min_y = args.brushed_min_y;\n            args.processed.max_y = args.brushed_max_y;\n        }\n    }\n\n    MG.add_hook('y_axis.process_min_max', processYAxis);\n\n    function afterRollover(args) {\n        if (args.brushing_history && brushHistory[args.target] && brushHistory[args.target].brushed) {\n            var svg = d3.select(args.target).select('svg');\n            svg.classed('mg-brushed', true);\n        }\n    }\n\n    MG.add_hook('line.after_rollover', afterRollover);\n\n    return;\n}\n","'use strict';\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _GHDataCharts = require('./GHDataCharts');\n\nvar _GHDataCharts2 = _interopRequireDefault(_GHDataCharts);\n\nvar _GHDataAPI = require('./GHDataAPI');\n\nvar _GHDataAPI2 = _interopRequireDefault(_GHDataAPI);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar queryString = require('query-string');\nwindow.$ = require('jquery');\n\nvar GHDataDashboard = function () {\n  function GHDataDashboard(state) {\n    var _this = this;\n\n    _classCallCheck(this, GHDataDashboard);\n\n    this.EMPTY_STATE = {\n      comparedTo: []\n    };\n    this.STARTING_HTML = $('#cards')[0].innerHTML;\n    this.state = state || this.EMPTY_STATE;\n    this.ghdata = new _GHDataAPI2.default();\n    if (/repo/.test(location.search) && !state) {\n      console.log('State from URL');\n      this.setStateFromURL();\n    }\n    window.addEventListener('popstate', function (e) {\n      _this.setStateFromURL();\n    });\n  }\n\n  _createClass(GHDataDashboard, [{\n    key: 'setStateFromURL',\n    value: function setStateFromURL() {\n      var _this2 = this;\n\n      var parsed = queryString.parse(location.search, { arrayFormat: 'bracket' });\n      var state = {\n        comparedTo: []\n      };\n      state.repo = this.ghdata.Repo(parsed.repo.replace(' ', '/'));\n      if (parsed.comparedTo) {\n        parsed.comparedTo.forEach(function (repo) {\n          state.comparedTo.push(_this2.ghdata.Repo(repo.replace(' ', '/')));\n        });\n      }\n      this.state = state;\n      this.render();\n    }\n  }, {\n    key: 'pushState',\n    value: function pushState(state, title) {\n      this.state = state || this.state;\n      title = title || this.state.repo.owner + '/' + this.state.repo.name;\n      var queryString = '?repo=' + this.state.repo.owner + '+' + this.state.repo.name;\n      this.state.comparedTo.forEach(function (repo) {\n        queryString += '&comparedTo[]=' + repo.owner + '+' + repo.name;\n      });\n      history.pushState(null, title, queryString);\n      document.title = title;\n    }\n  }, {\n    key: 'addCard',\n    value: function addCard(title, repo, className) {\n      var cardElement = document.createElement('section');\n      if (className) {\n        cardElement.className = className;\n      }\n      var titleElement = document.createElement('h1');\n      var repoElement = document.createElement('h2');\n      titleElement.innerHTML = title;\n      repoElement.innerHTML = repo;\n      $('#cards').append(cardElement);\n      $(cardElement).append(titleElement);\n      $(cardElement).append(repoElement);\n      return cardElement;\n    }\n  }, {\n    key: 'renderGraphs',\n    value: function renderGraphs(element, repo) {\n      $(element).find('.linechart').each(function (index, element) {\n        var title = element.dataset.title || element.dataset.source[0].toUpperCase() + element.dataset.source.slice(1);\n        console.log(element.dataset.source);\n        repo[element.dataset.source]().then(function (data) {\n          if (data && data.length) {\n            _GHDataCharts2.default.LineChart(element, data, title, typeof element.dataset.rolling !== 'undefined');\n          } else {\n            _GHDataCharts2.default.NoChart(element, title);\n          }\n        }, function (error) {\n          _GHDataCharts2.default.NoChart(element, title);\n        });\n      });\n    }\n  }, {\n    key: 'renderComparisonForm',\n    value: function renderComparisonForm() {\n      var self = this;\n      if (this.comparisonCard) {\n        this.comparisonCard.outerHTML = '';\n      }\n      this.comparisonCard = this.addCard(null, null, 'unmaterialized');\n      $(this.comparisonCard).append($('#comparison-form-template')[0].innerHTML);\n      $(this.comparisonCard).find('.search').on('keyup', function (e) {\n        if (e.keyCode === 13) {\n          var comparedRepo = self.ghdata.Repo(this.value);\n          self.state.comparedTo.push(comparedRepo);\n          self.pushState();\n          self.renderComparisonRepo(null, comparedRepo);\n        }\n      });\n    }\n  }, {\n    key: 'renderBaseRepo',\n    value: function renderBaseRepo(repo) {\n      repo = repo || this.state.repo;\n      $('#main-repo-search').val(repo.owner + '/' + repo.name);\n\n      var activityCard = this.addCard('Activity', '<strong>' + repo.owner + '/' + repo.name + '</strong>');\n      activityCard.innerHTML += $('#base-template')[0].innerHTML;\n      this.renderGraphs(activityCard, repo);\n\n      var ecosystemCard = this.addCard('Ecosystem', '<strong>' + repo.owner + '/' + repo.name + '</strong>');\n      ecosystemCard.innerHTML += $('#ecosystem-template')[0].innerHTML;\n      this.renderGraphs(ecosystemCard, repo);\n      repo.dependents().then(function (dependents) {\n        for (var i = 0; i < dependents.length && i < 10; i++) {\n          $(ecosystemCard).find('#dependents').append(dependents[i].name + '<br>');\n        }\n      });\n      repo.dependencies().then(function (dependencies) {\n        for (var i = 0; i < dependencies.dependencies.length && i < 10; i++) {\n          $(ecosystemCard).find('#dependencies').append(dependencies.dependencies[i].name + '<br>');\n        }\n      });\n\n      this.renderComparisonForm();\n    }\n  }, {\n    key: 'renderComparisonRepo',\n    value: function renderComparisonRepo(compareRepo, baseRepo) {\n      compareRepo = compareRepo || this.state.repo;\n      var activityComparisonCard = this.addCard('Activity', '<strong>' + compareRepo.owner + '/' + compareRepo.name + '</strong> versus <strong>' + baseRepo.owner + '/' + baseRepo.name + '</strong>');\n      activityComparisonCard.innerHTML += $('#base-template')[0].innerHTML;\n      $(activityComparisonCard).find('.linechart').each(function (index, element) {\n        var title = element.dataset.title || element.dataset.source[0].toUpperCase() + element.dataset.source.slice(1);\n        compareRepo[element.dataset.source]().then(function (compare) {\n          var compareData = _GHDataCharts2.default.convertToPercentages(compare);\n          baseRepo[element.dataset.source]().then(function (base) {\n            var baseData = _GHDataCharts2.default.convertToPercentages(base);\n            var combinedData = _GHDataCharts2.default.combine(baseData, compareData);\n            _GHDataCharts2.default.LineChart(element, combinedData, title, baseRepo.owner + '/' + baseRepo.name);\n          }, function (error) {\n            _GHDataCharts2.default.NoChart(element, title);\n          });\n        }, function (error) {\n          _GHDataCharts2.default.NoChart(element, title);\n        });\n      });\n      this.renderComparisonForm();\n    }\n  }, {\n    key: 'render',\n    value: function render(state) {\n      var _this3 = this;\n\n      state = state || this.state;\n      var $cards = $('#cards');\n      $cards.html('');\n      this.renderBaseRepo();\n      state.comparedTo.forEach(function (repo) {\n        _this3.renderComparisonRepo(null, repo);\n      });\n    }\n  }, {\n    key: 'startSearch',\n    value: function startSearch(url) {\n      this.state = this.EMPTY_STATE;\n      this.state.repo = this.ghdata.Repo(url);\n      this.pushState();\n      this.render();\n    }\n  }, {\n    key: 'reset',\n    value: function reset() {\n      var self = this;\n      $('#cards').html(this.STARTING_HTML).find('.reposearch').on('keyup', function (e) {\n        if (e.keyCode === 13) {\n          self.startSearch(this.value);\n        }\n      });\n    }\n  }]);\n\n  return GHDataDashboard;\n}();\n\n$(document).ready(function () {\n\n  window.dashboard = new GHDataDashboard();\n\n  $('.reposearch').on('keyup', function (e) {\n    if (e.keyCode === 13) {\n      dashboard.startSearch(this.value);\n    }\n  });\n});\n"]}